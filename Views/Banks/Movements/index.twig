{% block content %}
<section id="tableMovements">
    <div class="header-buttons">
        <div class="btn-group main-buttons">
            <a role="button" data-action="openLateral" class="btn btn-default" data-module="bancos" data-panelsize="sm" data-route="bancos/movimientos/crear">
                <span class="fa fa-plus"></span> Nuevo Movimiento Bancario
            </a>
            <a role="button"
                 class="btn btn-primary"
                 data-toggle="collapse"
                 href="#collapseMovements">
                 <i class="fa fa-search" aria-hidden="true"></i>
                 Consulta
            </a>
        </div>
    </div>
    <div class="panel-content">
        <div class="collapse" id="collapseMovements">
            <div class="box">
                <div class="box-header">
                <h3 class="box-title">Filtrar por cuenta bancaria</h3>
                     <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-toggle="collapse" data-target=".collapseFiltro"
                            aria-expanded="false" aria-controls="collapseFiltro" data-toggle="tooltip"
                                title="Indicaciones">
                            <i class="ui ui-help_outline"></i>
                        </button>
                    </div>
                </div>
                <div class="indication collapse collapseFiltro">
                    <div class="indication-content">
                        <div class="indication-img">
                            <span class="indication-icon ui ui-help"></span>
                        </div>
                        <div class="indication-text">
                           Seleccione la cuenta bancaria que deseas filtrar y el periodo adecuado
                        </div>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-7">
                            <div class="row">
                                <div class="col-md-6" id="selectAccount">
                                    <div class="form-group">
                                        <label>Cuenta bancaria:</label>
                                        <template>
                                            <el-select v-model="valueAccount" filterable clearable placeholder="Seleccione o escriba..">
                                                <el-option v-for="item in accounts" :key="item.id" :label="item.account" :value="item.id">
                                                    <span style="float: left">${ item.account }</span>
                                                    <span style="float: right; color: #8492a6; font-size: 13px">${ item.shortname }</span>
                                                </el-option>
                                            </el-select>
                                        </template>
                                    </div>
                                </div>
                                <div class="col-md-6" id="componentDatePicker">
                                    <div class="form-group">
                                        <label>Periodo</label>
                                        <template>
                                            <el-date-picker format="yyyy-MM-dd" v-model="valueDate" type="daterange" align="right" :picker-options="pickerOptions"
                                                placeholder="Seleccione...">
                                            </el-date-picker>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="row">
                                <div class="col-md-4">
                                    <strong>Cargo</strong>
                                </div>
                                <div class="col-md-4">
                                    <strong>Abono</strong>
                                </div>
                                <div class="col-md-4">
                                    <strong>Saldo</strong>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    $ ${ Number(chargeValue).toLocaleString('es-MX') }
                                </div>
                                <div class="col-md-4">
                                    $ ${ Number(paymentValue).toLocaleString('es-MX') }
                                </div>
                                <div class="col-md-4">
                                    $ ${ Number(balanceValue).toLocaleString('es-MX') }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tableMovements">
            <vue-file-modal ref="fileModal" :module="'banks'"></vue-file-modal>
            <vue-dynamic-table-rbc
                :loading-from-server="loadingFromServer"
                box-classes="box box-primary full-height"
                class-name="table table-bordered table-hover"
                :source-columns="columns"
                :select-options="selectOptions"
                :data-model="datasource"
                @export="exportTable"
                :remote-method="remoteSearch"
                :pagination-options="{pageSizes: [20, 50, 100], pageSize: 100}"
                template-file-name="Requisiciones de Compras"
                :total-results="totalResults">
                {% include '/Banks/Movements/slots.twig' %}
            </vue-dynamic-table-rbc>
        </div>
    </div>
</section>
{% endblock %} {% block loadScripts %}
<script id="scriptContainer" type="text/javascript">
    init.length = 0;
    uiVars['providerId'] = {{ providerId | json_encode | raw }};
    init = [{
        title: 'Movimientos Bancarios',
        file: 'Bank/Movements/list.js',
        functions: [{
            name: 'initBankMovements',
            args: [uiVars['providerId']]
        }]
    }]
</script>
{% endblock %}
