{% block body %}
<section>
    <div id="tableTeams">
        <div class="header-buttons">
            <div class="btn-group main-buttons">
                <a  role="button" class="btn btn-success pull-left"
                data-action="openLateral"
                data-route="crm/catalogos/teams/Add"
                data-panelsize="xs">
                Nueva Equipo</a>
            </div>

        </div>
        <div class="panel-content">
            <div class="row">
                <div class="col-md-12">
                    <vue-dynamic-table-rbc
                    box-classes="box box-primary full-height"
                    class-name="table table-bordered table-hover"
                    :remote-method="ajaxEmployeeSearch"
                    :source-columns="employeeSourceColumns"
                    :select-options="catalogs"
                    :data-model="employeeList"
                    :total-results="employeeResults"
                    >
                    <template slot="add" scope="row">
                        <div  class="ui-button bg-Light-Blue overflowInherit" >
                            <el-popover id="popover" ref="popover4" placement="right"
                            width="250" max-height="400" trigger="click" >
                            <span role="button" title="Asigna otro empleado" v-on:click="onClickForm"
                            class="closeTab fa fa-plus"></span>
                            <a style="cursor:pointer;" v-on:click="saveChangesLits(row.object)">
                                <span class="glyphicon glyphicon-floppy-disk btn-lg"></span></a>
                                <el-select v-model="Employee" multiple filterable remote
                                :remote-method="remoteMethod" :loading="loading">
                                <el-option
                                v-for="item in listEmployee"
                                :key="item.value"
                                :label="item.label"
                                :value="item.value">
                            </el-option>
                        </el-select>
                        <h4>Empleados</h4>
                        <ul id="example-1">
                            <div class="list-group">
                                <li v-for="employee in row.object.employee">
                                    <a class="list-group-item">
                                        <div v-if ="(employee.picture !== '[none]')" class="pull-left contentMiddle">
                                            <img
                                            v-bind:src="'https://cdn.tuadmin.com/' + employee.picture"
                                            class="img-circle h35"
                                            style="margin-right: 10px;">
                                        </div>
                                        <div class="h40">
                                            ${ employee ?
                                                (employee.name + ' '+
                                                employee.father_surname + ' ' +
                                                employee.mother_surname) : 'S/A' }
                                            </div>
                                            <span
                                            role="button"
                                            class="closeTab delMiddle20 fa fa-times"
                                            title="Quitar este empleado de la oportunidad"
                                            v-on:click="onDeleteMember(row.object.id, employee.id)">
                                        </span>
                                    </a>
                                </li>
                            </div>
                        </ul>
                    </el-popover>
                    <el-popover id="select" ref="popover5" placement="right"
                    width="250" max-height="400" trigger="click" >
                    <div><input type="checkbox" :id="'checklist' + row.object.id" >
                        <label>Lista de Verificaci칩n</label></div>
                        <div><input type="checkbox" :id="'critical' + row.object.id" >
                            <label>Incidentes Criticos</label></div>
                            {#<div><input type="checkbox" :id="'field' + row.object.id" >
                                <label>Investigaci칩n de Campo</label></div>#}
                                {#<div><input type="checkbox" :id="'forced' + row.object.id" >
                                    <label>Elecci칩n Forzada</label></div>#}
                                    <div><input type="checkbox" :id="'graphic' + row.object.id" >
                                        <label>Escala Gr치fica</label></div>
                                        <div>
                                            <a v-on:click="onSendClick(row.object.id)" class="btn btn-info">
                                                <span class="glyphicon glyphicon-send"></span> Enviar
                                            </a>
                                        </div>
                                    </el-popover>

                                    <a v-on:click="loadAll(row.object)" class="btn btn-info" v-popover:popover4>
                                        <span class="glyphicon glyphicon-eye-open"></span>ver
                                    </a>
                                    <a class="btn btn-info" v-popover:popover5>
                                        <span class="glyphicon glyphicon-list-alt"></span> Evaluar Equipo
                                    </a>
                                </div>
                            </template>
                            <template slot="actions" scope="row">
                                <div class="ui-button bg-Light-Blue overflowInherit">
                                    <div class="secondary">
                                        <a class="btn btn-info"  v-on:click="onEditClick(row.object.id)">
                                            <span class="glyphicon glyphicon-edit"></span> Editar
                                        </a>
                                        <a class="btn align-right"  v-on:click="onRemoveClick(row.object.id)">
                                            <span class="glyphicon glyphicon-trash"></span> Eliminar
                                        </a>
                                    </div>
                                </div>
                            </template>
                        </vue-dynamic-table-rbc>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% block loadScripts %}
<script id="scriptContainer" type="text/javascript">
var catalogs = {{ catalogs|json_encode|raw }};
init.length = 0;
init = [ {
    title: 'Revisiones',
    file:  'HumanResources/PerformanceAssessment/list.js',
    functions: [ {
        name: 'initTeamsListModule',
        args: [catalogs]
    } ]
} ];
</script>
{% endblock %}
