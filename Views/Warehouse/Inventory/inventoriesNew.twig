{% block body %}
<section>
    <div id="create-inventory-module-productsTable-container">
        <div class="header-buttons">
            <el-row :gutter="16">
                <el-col :span="4">
                    {# ALMACEN #}
                        <div class="form-group">
                            <strong id="labelWarehouse" :class="['inputLabel', selectedWarehouse ? 'completed' : 'required', 'inactive']">Almacén</strong>
                            <span v-if="selectedWarehouse" class="glyphicon glyphicon-ok-circle" style="color:#BBB;font-size:0.8em;"></span><br>

                            <el-select v-model="selectedWarehouse" filterable placeholder="Selecciona un almacén" ref="warehousesEl"
                                v-on:change="focusNext('warehousesEl')"
                                v-on:visible-change="visibleChange($event, 'labelWarehouse')">
                                <el-option
                                    v-for="item in $store.getters.dataForSelect('warehouses').options"
                                    :label="item.name"
                                    :key="item.id"
                                    :value="item.id">
                                </el-option>
                            </el-select>
                        </div>

                    {# USUARIO #}
                    <div class="form-group">
                        <strong id="labelUser" :class="['inputLabel', selectedUser ? 'completed' : 'required', 'inactive']">Usuario</strong>
                        <span v-if="selectedUser" class="glyphicon glyphicon-ok-circle" style="color:#BBB;font-size:0.8em;"></span><br>

                        <el-select v-model="selectedUser" filterable placeholder="Selecciona un usuario" ref="usersEl"
                            v-on:change="focusNext('usersEl')"
                            v-on:visible-change="visibleChange($event, 'labelUser')">
                            <el-option
                                v-for="item in $store.getters.dataForSelect('users').options"
                                :label="item.name"
                                :key="item.id"
                                :value="item.id">
                            </el-option>
                        </el-select>
                    </div>
                </el-col>

                <el-col :span="6">
                    {# TIPO DE INVENTARIO #}
                    <div class="form-group">
                        <strong id="labelInventoryType" :class="['inputLabel', inventoryTypeCompleted ? 'completed' : 'required', 'inactive']">Conteo de</strong>
                        <span v-if="inventoryTypeCompleted" class="glyphicon glyphicon-ok-circle" style="color:#BBB;font-size:0.8em;"></span><br>

                        <el-select v-model="inventoryType" filterable placeholder="Selecciona un tipo de inventario" ref="inventoryType"
                            v-on:change="focusNext('inventoryType')"
                            v-on:visible-change="visibleChange($event, 'labelInventoryType')">
                            <el-option
                                v-for="item in $store.getters.dataForSelect('inventoryTypes').options"
                                :label="item.name"
                                :key="item.id"
                                :value="item.id">
                            </el-option>
                        </el-select>
                    </div>

                    <div style="margin-top: 14px">
                        <div v-show="inventoryType == 1 || inventoryType == 5" class="form-group">
                            {# <strong style="font-size:0.8em;">Categoría / Subcategoría*</strong><br> #}
                            <el-cascader
                                class="full-width"
                                placeholder="Selecciona Categoría / Subcategoría"
                                ref="categorySubcategoryEl"
                                change-on-select
                                clearable
                                filterable
                                :options="$store.getters.dataForSelect('subcategories').options"
                                v-model="selectedCategories">
                            </el-cascader>
                        </div>

                        {# POR UBICACION #}
                        <div v-show="inventoryType == 3" class="form-group">
                            {# <strong style="font-size:0.9em;">Almacen / Ubicación</strong><br> #}
                            <el-cascader
                                class="full-width"
                                placeholder="Selecciona Almacén / Ubicación"
                                change-on-select
                                clearable
                                filterable
                                :options="$store.getters.dataForSelect('ubications').options"
                                v-model="selectedUbications">
                            </el-cascader>
                        </div>

                        <div v-show="inventoryType == 4" class="form-group">
                            {# <label for="to-date">*Selecciona el proveedor</label> #}
                            {# SELECTIZE PROVEEDOR #}
                            <el-select v-model="selectedProviders" filterable placeholder="Selecciona el proveedor" ref="providersEl"
                                v-on:change="focusNext('providersEl')">
                                <el-option
                                    v-for="item in $store.getters.dataForSelect('providers').options"
                                    :label="item.legal_name"
                                    :key="item.id"
                                    :value="item.id">
                                </el-option>
                            </el-select>
                        </div>
                    </div>
                </el-col>

                <el-col :span="6">
                    {# FECHA RECUENTO #}
                    <div class="form-group">
                        <strong :class="['inputLabel', date ? 'completed' : 'required', 'inactive']">Fecha recuento</strong><br>
                        <el-date-picker
                            v-model="date"
                            type="date"
                            :picker-options="datePickerOptions"
                            placeholder="Selecciona una fecha"
                            format="dd MMM yyyy"
                            align="right">
                        </el-date-picker>

                    </div>
                </el-col>

                <el-col :span="6">
                    <div class="form-group">
                        <strong ref="labelInventoryTitle" class="inputLabel inactive" :class="title !== '' ? 'completed' : 'required'">Título</strong><br>
                        <el-input placeholder="Nombre del inventario" v-model="title" v-on:change="validateField($event, 'inventoryTitle')"></el-input>
                        {# <input v-model="inventoryTitle" class="form-control" type="text" id="titulo" name="titulo"> #}
                    </div>

                    <strong style="font-size:0.8em;">Observaciones</strong><br>
                    <div class="form-group">
                        <textarea
                            v-model="comments"
                            id="observaciones"
                            cols="30"
                            rows="2">
                        </textarea>
                    </div>
                </el-col>

                <el-col :span="2">
                    <button
                        class="btn btn-primary btn-block btn-sm"
                        type="button"
                        v-on:click="clearInputs">
                        Reiniciar
                    </button>

                    <button
                        class="btn btn-success btn-block btn-sm"
                        type="button"
                        :disabled="scheduleBtnDisabled"
                        v-on:click="scheduleInventory">
                        Programar
                    </button>
                </el-col>

                {# <div class="col-xs-2" style="border-left:1px solid #DDD">
                    {% include 'warehouse/Inventory/inventories_topButtons.twig' with {actual: 'programacion'} %}
                </div> #}
            </el-row>
        </div>
        <div class="panel-content">
            {% include 'warehouse/Inventory/vue-tables/inventoryProducts.twig' %}
        </div>





    </div>
</section>
{% endblock %}

{% block loadScripts %}
    <script id="scriptContainer" type="text/javascript">
        uiVars['newInventoryModuleData'] = {
            inventoryTypes: {{ inventoryTypes|json_encode|raw }}
        };
        init.length = 0;
        init = [ {
            title: 'Programar Conteo',
            file: 'Warehouse/Inventories/inventories_new.js',
            functions: [ {
                name: 'inventoriesNewInit',
                args: [ uiVars['newInventoryModuleData'] ]
            } ]
        } ];
    </script>
{% endblock %}
