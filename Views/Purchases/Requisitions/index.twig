{% block content %}
    <section>
        <div id="tableRequisitions">
            <div class="header-buttons">
                <div class="btn-group main-buttons">
                    <a
                        role="button"
                        data-action="openLateral"
                        class="btn btn-success"
                        data-module="compras"
                        data-panelSize="md"
                        data-route="compras/requisiciones/nueva">
                        <span class="fa fa-plus "></span>
                        Nueva Requisición
                    </a>

                    <a  role="button" class="btn btn-primary" data-toggle="collapse" data-target="#collapseRequisitions"
                            aria-expanded="false" aria-controls="collapseRequisitions" data-toggle="tooltip"
                                title="Indicaciones"> Ver Métricas

                        </a>
                </div>
                <div class="clearfix">
                </div>
                <div class="collapse" id="collapseRequisitions">
                    <div class="block h100">
                        <div class="contentMiddle content-fluid   ">
                            <div class="description-block border-right">
                                <h5 class="description-header">$${ totalCost }</h5>
                                <span class="description-text">TOTAL COSTO</span>
                            </div>
                        </div>
                        <div class="contentMiddle content-fluid">
                            <div class="description-block border-right">
                                <h5 class="description-header">${ totalReq }</h5>
                                <span class="description-text">TOTAL REQUISICIONES</span>
                            </div>
                        </div>
                        <div class="contentMiddle content-fluid">
                            <div class="description-block border-right">
                                <h5 class="description-header">$${ totalPur}</h5>
                                <span class="description-text">TOTAL COMPRADO</span>
                            </div>
                        </div>
                        <div class="contentMiddle content-fluid">
                            <div class="description-block">
                                <h5 class="description-header">${ totalProd }</h5>
                                <span class="description-text">TOTAL PRODUCTOS COMPRADOS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-content">
                <vue-file-modal ref="fileModal" :module="'purchases/requisitions'" ></vue-file-modal>
                <vue-dynamic-table-rbc
                    box-classes="box box-primary full-height"
                    class-name="table table-bordered table-hover"
                    :pagination-options="{ pageSizes: [ 20, 50, 100 ], pageSize: 100 }"                    
                    :source-columns="columns"
                    :select-options="selectOptions"
                    :data-model="datasource"
                    @export="exportTable"
                    :remote-method="remoteSearch"
                    template-file-name="Requisiciones de Compras"
                    :total-results="totalResults">
                    {% include 'Purchases/Requisitions/slots.twig' %}
                </vue-dynamic-table-rbc>
            </div>
            {% include '/Purchases/Requisitions/modals.twig' %}
        </div>
    </section>
{% endblock %}
{% block loadScripts %}
    <script id="scriptContainer" type="text/javascript">
        init.length = 0;
        init = [ {
            title: 'Requisiciones de Compras',
            file: 'Purchase/Requisitions/list.js',
            functions: [ {
                name: 'initRequisitionsList',
                args: [ ]
            } ]
        } ];
    </script>
{% endblock %}
